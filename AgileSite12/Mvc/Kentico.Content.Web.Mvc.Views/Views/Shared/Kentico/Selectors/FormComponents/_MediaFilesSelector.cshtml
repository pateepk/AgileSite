@using Kentico.Components.Web.Mvc.FormComponents

@model MediaFilesSelector

@{
    var componentId = Html.IdFor(m => m.Value) + "_component";
    var filesData = Model.FilesData;
}
<kentico-media-files-form-component
    id="@componentId"
    input-name="@Html.NameFor(m => m.Value)"
    library-name="@Model.Properties.LibraryName"
    max-files-limit="@Model.Properties.MaxFilesLimit"
    allowed-extensions="@Model.AllowedExtensions"
    >
</kentico-media-files-form-component>

<script type="text/javascript">
(function () {
    const filesData = "@Html.Raw(HttpUtility.JavaScriptStringEncode(filesData))";
    if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", function () {
            window.kentico._modalDialog.mediaFilesSelector.init("@componentId", filesData);
        });
    } else {
        window.kentico._modalDialog.mediaFilesSelector.init("@componentId", filesData);
    }
})();
</script>
