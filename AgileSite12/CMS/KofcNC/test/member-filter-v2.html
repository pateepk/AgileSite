<!DOCTYPE html>
<html>
<head>
   <title></title>
   <meta charset="utf-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <meta name="web_author" content="WTE Solutions">
   <meta name="google-site-verification" content="6cLh7LxlyALB12LWRUov1n4An4ZwMKm9SOUJQu74SWs" />

   <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
   <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css" rel="stylesheet">
   <script defer type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
   <script data-search-pseudo-elements src="https://kit.fontawesome.com/ecc92a4d73.js"></script>

   <link rel="stylesheet" href="https://kofcnc.agilesite.com/App_Themes/kofcNC/assets/css/core.min.css" type="text/css" media="all">

   <!--v6 font awesome -->
   <!--<script data-search-pseudo-elements src="https://kit.fontawesome.com/a2dcd68816.js" crossorigin="anonymous"></script>-->
   <!--v5 font awesome?? -- why are we switching backwards???? - because v6 breaks all the icons on the site because it's written in v5 code - pk-->
   <script data-search-pseudo-elements src="https://kit.fontawesome.com/ecc92a4d73.js" crossorigin="anonymous" defer></script>

   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,300;0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">

   <link rel="apple-touch-icon" sizes="180x180" href="https://kofcnc.agilesite.com/App_Themes/kofcNC/assets/fav/apple-touch-icon.png">
   <link rel="icon" type="image/png" sizes="32x32" href="https://kofcnc.agilesite.com/App_Themes/kofcNC/assets/fav/favicon-32x32.png">
   <link rel="icon" type="image/png" sizes="16x16" href="https://kofcnc.agilesite.com/App_Themes/kofcNC/assets/fav/favicon-16x16.png">
   <link rel="mask-icon" href="https://kofcnc.agilesite.com/App_Themes/kofcNC/assets/fav/safari-pinned-tab.svg" color="#5bbad5">
   <link rel="shortcut icon" href="https://kofcnc.agilesite.com/App_Themes/kofcNC/assets/fav/favicon.ico">
   <meta name="msapplication-TileColor" content="#ffffff">
</head>
<body>
   <style>
      label {
         font-weight: bold; /* Make the label text bold */
         margin-right: 10px; /* Add some space between the label and the dropdown */
         display: inline-block; /* Align label and dropdown on the same line */
         vertical-align: middle; /* Align vertically */
         margin-top: 5px; /* Add some space above the label */
      }

      select {
         font-size: 1.2em; /* Increase the font size */
         margin-right: 20px; /* Add some space to the right of the dropdown */
         display: inline-block; /* Align label and dropdown on the same line */
         vertical-align: middle; /* Align vertically */
      }
   </style>

   <div>
      <label for="ddlDistrict">District:</label>
      <!-- need to load the district here -->
      <select id="ddlDistrict">
         <option value="0">Select District</option>
         <option value="-1">Any</option>
         <option value="1">1</option>
         <option value="2">2</option>
         <option value="3">3</option>
         <option value="4">4</option>
         <option value="5">5</option>
         <option value="6">6</option>
         <option value="7">7</option>
         <option value="21">21</option>
         <option value="32">32</option>
         <option value="33">33</option>
      </select>

      <label for="ddlCouncil">Council:</label>
      <!-- need to load the options here -->
      <select id="ddlCouncil">
         <option value="0">Select Council</option>
         <option value="-1">Any</option>
         <option value="9549">9549</option>
         <option value="9365">9365</option>
         <option value="11235">11235</option>
         <option value="14276">14276</option>
      </select>

      <label for="txtSearch">Search:</label>
      <input class="input-search" type="text" id="txtSearch" name="txtSearch" placeholder="name or email" />
      <button id="btnReset" class="btn btn-brand-2 btn-rounded btn-large btn-block">reset</button>
   </div>

   <script>
      // button on click event
      $(document).ready(function () {

         var councilnum = getParamWithDefault('c', '-1');
         var districtnum = getParamWithDefault('d', '-1');
         var search = getParamWithDefault('search', '');
         var sort = getParamWithDefault('s', '');

         console.log('c=' + councilnum + ' d=' + districtnum + ' search=' + search + ' sort=' + sort);

         SetFilterData();

         //selectDropDownOption('ddlCouncil', councilnum, 'false', 'true', '400');
         //selectDropDownOption('ddlDistrict', districtnum, 'false', 'true', '400');
         //setControlValue('txtSearch', search);


         //$('#districtDropdown, #councilDropdown').change(function () {

         //    //        reloadWithQueryStringVars({
         //    //        'district': district,
         //    //        'council': council
         //    //    });
         //});
         //var availableTags = autocompletedata;

         //var availableTags = ["1", "12", "123"];
         ////var data1 = JSON.parse(autocompletedata);
         //$('#txtSearch').autocomplete({
         //   source: availableTags,
         //   autofocus: true,
         //   disable: false,
         //   //close: function (event, ui) {
         //   //    checkHandle(name, event);
         //   //},
         //   //change: function (event, ui) {
         //   //    checkHandle(name, event);
         //   //},
         //   messages: {
         //      //noResults: 'no results',
         //      noResults: '',
         //      results: function (amount) {
         //         //return amount + 'results.';
         //         return '';
         //      }
         //   }
         //});

         //var districtDropdown = $('#ddlDistrict');
         //if (districtDropdown != null) {
         //   var values = '{"name":"Select District", "value": "0"}';
         //   values += ",";
         //   values += '{"name":"Any", "value": "-1"}';
         //   values += ",";
         //   values += '{"name":"1", "value": "1"}';
         //   values += ",";
         //   values += '{"name":"2", "value": "2"}';
         //   values += ",";
         //   values += '{"name":"3", "value": "3"}';
         //   values += ",";
         //   values += '{"name":"21", "value": "21"}';
         //   //var jsonString = '{ "data": [' + values + ']}';
         //   var jsonString = '[' + values + ']';
         //   var regiondata = JSON.parse(jsonString);
         //   districtDropdown.empty();
         //   for (var i = 0; i < regiondata.length; i++) {
         //      districtDropdown.append($("<option></option>").val(regiondata[i].value).html(regiondata[i].name));
         //   }
         //   //$(regiondata).each(function (i, val) {
         //   //   $.each(val, function (k, v) {
         //   //      console.log(k + " : " + v);
         //   //     // districtDropdown.append($("<option></option>").val(regiondata.value).html(regiondata.name));
         //   //   });
         //   //});
         //}


         $('#txtSearch').on('keyup', function (event) {
            OnKeyEvents(this, event);
         });

         $('#txtSearch').on('change', function (event) {
            applyFilters(event);
         });

         $('#ddlCouncil').on('change', function (event) {
            applyFilters(event);
         });

         $('#ddlDistrict').on('change', function (event) {
            applyFilters(event);
         });

         $('#btnReset').on('click', function (event) {
            resetSearch(event);
         });
      });

      function SetFilterData(event) {

         console.log("set filter data");

         var councilnumold = getControlValue('ddlCouncil');
         var districtnumold = getControlValue('ddlDistrict');
         var searchtermold = getSearchTerm('txtSearch', 'name or email');

         // not ideal but for now grab this from the param.
         var councilnum = getParamWithDefault('c', '-1');
         var districtnum = getParamWithDefault('d', '-1');
         var search = getParamWithDefault('search', '');
         var sort = getParamWithDefault('s', '');


         // Construct the URL with the username as a query parameter
         var checkUrl = 'https://www.kofcnc.org/system/lookups/get-filters';
         checkUrl += '?c=' + encodeURIComponent(councilnum);
         checkUrl += '&d=' + encodeURIComponent(districtnum);
         checkUrl += '&search=' + encodeURIComponent(search);

         // Send post to get data
         $.post(checkUrl, function (response) {
            // Check the response for specific keywords within HTML
            var rregion = $(response).find('#rregion');
            var rcouncil = $(response).find('#rcouncil');
            var rmember = $(response).find('#rmember');
            var rdistrict = $(response).find('#rdistrict');

            var regiondata = JSON.parse(rregion.val());
            var councildata = JSON.parse(rcouncil.val());
            var memberdata = JSON.parse(rmember.val());
            var districtdata = JSON.parse(rdistrict.val());

            var districtDropdown = $('#ddlDistrict');
            if (districtDropdown != null) {
               districtDropdown.empty();
               for (var i = 0; i < districtdata.length; i++) {
                  districtDropdown.append($("<option></option>").val(districtdata[i].value).html(districtdata[i].name));
               }
            }

            var councilDropdown = $('#ddlCouncil');
            if (councilDropdown != null) {
               councilDropdown.empty();
               for (var i = 0; i < councildata.length; i++) {
                  councilDropdown.append($("<option></option>").val(councildata[i].value).html(councildata[i].name));
               }
            }

         }).fail(function () {
            // Handle any errors (e.g., server not responding)
            //$('#icon').html('<i class="fas fa-exclamation-triangle orange"></i>');
            console.log("Houston, we have a problem");
            //$('#message').text('We are experiencing technical difficulty, please contact support at info@kofcnc.org.');

            //$('#errormessage').text('Please proceed to registration by using the button below.');
            //$('#contactsupport').show();
            //$('#contactsupport').css('visibility', 'visible');

         });

         console.log("setting drop down values");
         // we set this here?
         selectDropDownOption('ddlCouncil', councilnum, 'false', 'true', '400');
         selectDropDownOption('ddlDistrict', districtnum, 'false', 'true', '400');
         setControlValue('txtSearch', search);
      }

      // Apply the filter (when search or table header is clicked)
      function applyFilters(event, sortID, sortParamName) {

         var councilnum = getControlValue('ddlCouncil');
         var districtnum = getControlValue('ddlDistrict');
         var searchterm = getSearchTerm('txtSearch', 'name or email');

         reloadWithQueryStringVars({
            'c': councilnum,
            'd': districtnum,
            'search': searchterm,
            's': sortID
         });
      }

   </script>

   <script>

      // Clear the search box
      function clearSearchBox(name, text) {
         var search = getControlValue(name);
         if (search == text) {
            setControlValue(name, '');
         }
      }

      // Fill the search box with 'water mark'
      function fillSearchBox(name, text) {
         var search = getSearchTerm(name);
         var placeholder = getControlPlaceHolderValue(name);
         if (typeof (placeholder) != 'undefined' && placeholder != text) {
            if (search == '') {
               setControlValue(name, text);
            }
         }
      }

      // set search text box
      function clearSearchInput(name, excludeText) {
         var val = getControlValue(name);
         if (val == excludeText) {
            setvsterm(name, '', excludeText);
         }
      }

      // Get search term
      function getSearchTerm(name, excludeText) {
         var ret = getControlValue(name);
         if (ret == excludeText) {
            ret = '';
         }
         return ret;
      }

      // get sort id
      function getSortID(name, sortParamName, sortId, defaultSort) {

         var ret = getParameterByName(name);

         if (typeof (ret) == 'undefined' || ret == '') {
            ret = sortId;
         }
         else {
            if (sortId != '' && typeof (sortId) != 'undefined') {
               if (sortId == ret) {
                  ret = sortId + 'x';
               }
               else {
                  ret = sortId;
               }
            }
         }

         //if (typeof (ret) == 'undefined') {
         //    if (sortId != null) {
         //        ret = sortId;
         //    }
         //    else {
         //        ret = defaultSort;
         //    }
         //}
         //else if (typeof (sortParamName) != 'undefined' && name == sortParamName) {
         //    if (sortId == ret) {
         //        ret = sortId + 'x';
         //    }
         //}

         return ret;
      }

      // hide a control
      function hideControl(name) {
         setControlVisibility(name, 'false');
      }

      // show a control
      function showControl(name) {
         setControlVisibility(name, 'true');
      }

      // show or hide control
      function setControlVisibility(name, show) {
         var n = '#' + name;

         if (typeof (show) == 'undefined' || show == '') {
            show = 'true';
         }

         if ($(n) != null) {
            if (show == 'true') {
               $(n).show();
               $(n).css('visibility', 'visible');
            }
            else {
               $(n).hide();
               $(n).css('visibility', 'hidden');
            }
         }
      }

      // Get value from a control (if exist)
      function getControlValue(name) {
         var val = null;
         var n = '#' + name;
         if ($(n) != null) {
            val = $(n).val();
         }
         return val;
      }

      // Get Control value with default
      function getControlValueWithDefault(name, defaultval) {
         var ret = getControlValue(name);
         if (typeof (ret) == 'undefined' || ret == '' || ret == null) {
            ret = defaultval;
         }
         return ret;
      }

      // Set control value
      function setControlValue(name, value, size) {
         var n = '#' + name;
         if (typeof (value) != 'undefined' && value != null && value != '') {
            if ($(n) != null) {
               $(n).val(value);
               setControlFontSize(name, size);
            }
         }
      }

      // get value from the 'placeholder' property of a control
      function getControlPlaceHolderValue(name) {
         var val = null;
         var n = '#' + name;
         if ($(n) != null) {
            val = $(n).attr('placeholder');
         }
         return val;
      }

      // set the value of the 'placeholder' property of a control
      function setControlPlaceHolderValue(name, value) {
         var n = '#' + name;
         if (typeof (value) != 'undefined' && value != null && value != '') {
            if ($(n) != null) {
               $(n).attr('placeholder', value);
            }
         }
      }

      // Set font
      function setControlFontSize(name, size) {
         var n = '#' + name;
         if ($(n) != null) {
            if (typeof (size) != 'undefined' && size != '') {
               $(n).css('font-weight', size);
            }
         }
      }

      // select drop down option
      function selectDropDownOption(name, option, checkzero, checkblank, size) {

         var n = '#' + name;
         if ((checkzero != 'true' || option != '0') && (checkblank != 'true' || option != '')) {
            if ($(n) != null) {
               var optionstring = n + " option[value='" + option + "']";
               $(optionstring).prop('selected', true);
               setControlFontSize(name, size);
            }
         }
      }

      // check to see if a check box is checked (also works for radio button)
      function isCheckBoxChecked(name) {
         var ret = false;
         var n = '#' + name;
         if ($(n) != null) {
            ret = $(n).is(':checked');
         }
         return ret;
      }

      // check a check box (also works for radio button)
      function checkCheckBox(name) {
         setCheckBoxValue(name, true);
      }

      // uncheck a check box (also works for radio button)
      function uncheckCheckBox(name) {
         setCheckBoxValue(name, false);
      }

      // set the 'check' property (also works for radio button)
      function setCheckBoxValue(name, check) {
         var n = '#' + name;
         if ($(n) != null) {
            $(n).prop('checked', check);
         }
      }

      // select radio button value
      function setRadioButtonValue(name, value) {
         var iname = "input[name='" + name + "'][value='" + value + "']";
         if ($(iname) != null) {
            $(iname).prop('checked', true);
         }
      }

      // get radio button value
      function getRadioButtonValue(name) {
         var ret = '';
         var iname = 'input:radio[name=' + name + ']:checked'
         if ($(iname) != null) {
            ret = $(iname).val();
         }
         return ret;
      }

      // get '1' or '0' from a boolean value
      function getOneOrZero(val, hideFalse) {
         var ret = '0';
         if (val != null) {
            if (getBoolean(val) == true) {
               ret = '1';
            }
         }

         if (ret == '0' && hideFalse == true) {
            ret = '';
         }
         return ret;
      }

      // get boolean from values
      function getBoolean(val) {
         var ret = false;
         if (typeof (val) != 'undefined' && val != null && val != '') {
            if (val == true || val == 1 || val == 'true' || val == 'yes') {
               ret = true;
            }
         }
         return ret;
      }

      // remove all param from url
      function resetStats() {
         var clearURL = window.location.href.substr(0, window.location.href.indexOf('?'));
         if (!clearURL) {
            clearURL = window.location.href;
         }
         window.location.href = clearURL;
      }

      // reload page without query string
      function reloadWithoutQueryString() {
         window.location = window.location.href.split('?')[0];
      }

      // reload with query string (does not add item with empty values and keep param not in reloaded list)
      function reloadWithQueryStringVars(queryStringVars) {
         var existingQueryVars = location.search ? location.search.substring(1).split('&') : [],
            currentUrl = location.search ? location.href.replace(location.search, '') : location.href,
            newQueryVars = {},
            newUrl = currentUrl + '?';

         if (existingQueryVars.length > 0) {
            for (var i = 0; i < existingQueryVars.length; i++) {
               var pair = existingQueryVars[i].split('=');
               newQueryVars[pair[0]] = pair[1];
            }
         }

         if (queryStringVars) {
            for (var queryStringVar in queryStringVars) {
               newQueryVars[queryStringVar] = queryStringVars[queryStringVar];
            }
         }

         if (newQueryVars) {
            for (var newQueryVar in newQueryVars) {
               if (typeof (newQueryVars[newQueryVar]) == 'undefined' || newQueryVars[newQueryVar] == '') {
                  // do nothing
               }
               else {
                  newUrl += newQueryVar + '=' + newQueryVars[newQueryVar] + '&';
               }
            }
            newUrl = newUrl.substring(0, newUrl.length - 1);
            window.location.href = newUrl;
         } else {
            window.location.href = location.href;
         }
      }

      // reload with query string (version 2)
      function reloadWithQueryStringVars2(queryStringVars) {
         var existingQueryVars = location.search ? location.search.substring(1).split('&') : [],
            currentUrl = location.search ? location.href.replace(location.search, '') : location.href,
            newQueryVars = {},
            newUrl = currentUrl + '?';
         if (existingQueryVars.length > 0) {
            for (var i = 0; i < existingQueryVars.length; i++) {
               var pair = existingQueryVars[i].split('=');
               newQueryVars[pair[0]] = pair[1];
            }
         }
         if (queryStringVars) {
            for (var queryStringVar in queryStringVars) {
               newQueryVars[queryStringVar] = queryStringVars[queryStringVar];
            }
         }
         if (newQueryVars) {
            for (var newQueryVar in newQueryVars) {
               newUrl += newQueryVar + '=' + newQueryVars[newQueryVar] + '&';
            }
            newUrl = newUrl.substring(0, newUrl.length - 1);
            window.location.href = newUrl;
         } else {
            window.location.href = location.href;
         }
      }

      // reload with query string (version 3)
      function reloadWithQueryStringVars3(queryStringVars) {
         var existingQueryVars = location.search ? location.search.substring(1).split('&') : [],
            currentUrl = location.search ? location.href.replace(location.search, '') : location.href,
            newQueryVars = {},
            newUrl = currentUrl + '?';

         if (existingQueryVars.length > 0) {
            for (var i = 0; i < existingQueryVars.length; i++) {
               var pair = existingQueryVars[i].split('=');
               newQueryVars[pair[0]] = pair[1];
            }
         }
         if (queryStringVars) {
            for (var queryStringVar in queryStringVars) {
               if (typeof queryStringVar[queryStringVar] != 'undefined') {
                  newQueryVars[queryStringVar] = queryStringVars[queryStringVar];
               }
            }
         }
         if (newQueryVars) {
            for (var newQueryVar in newQueryVars) {
               if (typeof newQueryVars[queryStringVar] != 'undefined') {
                  newUrl += newQueryVar + '=' + newQueryVars[newQueryVar] + '&';
               }
            }
            newUrl = newUrl.substring(0, newUrl.length - 1);
            window.location.href = newUrl;
         } else {
            window.location.href = location.href;
         }
      }

      // create cookie for the page
      function createCookie(name, value, days) {
         if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            var expires = '; expires=' + date.toGMTString();
         }
         else var expires = '';

         document.cookie = name + '=' + value + expires + '; path=/';
      }

      // read cookie from the page
      function readCookie(name) {
         var nameEQ = name + '=';
         var ca = document.cookie.split(';');
         for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
         }
         return null;
      }

      // get the first day of the year
      function getFirstDayOfYear(dateFrom) {

         if (typeof (dateFrom) == 'undefined' || dateFrom == '') {
            dateFrom = new Date();
         }
         var ret = new Date(dateFrom.getFullYear(), 0, 1);

         ret = getFormattedDate(ret);
         return ret;
      }

      // get the last day of the year
      function getLastDayOfYear(dateFrom) {
         if (typeof (dateFrom) == 'undefined' || dateFrom == '') {
            dateFrom = new Date();
         }
         var ret = new Date(dateFrom.getFullYear(), 11, 31);
         ret = getFormattedDate(ret);
         return ret;
      }

      // get first day of the month
      function getFirstOfMonth(dateFrom) {

         if (typeof (dateFrom) == 'undefined' || dateFrom == '') {
            dateFrom = new Date();
         }
         var ret = new Date(dateFrom.getFullYear(), dateFrom.getMonth(), 1);
         ret = getFormattedDate(ret);
         return ret;
      }

      // get last day of the month
      function getLastOfMonth(dateFrom) {
         if (typeof (dateFrom) == 'undefined' || dateFrom == '') {
            dateFrom = new Date();
         }
         var ret = new Date(dateFrom.getFullYear(), dateFrom.getMonth() + 1, 0);
         ret = getFormattedDate(ret);
         return ret;
      }

      // Get Yesterday's date
      function getYesterday() {
         return getPastDate(1);
      }

      // Get Tomorrow's date
      function getTomorrow() {
         return getFutureDate(1);
      }

      // Get Today's date
      function getToday() {
         return getFutureDate(0);
      }

      // Get 30 days ago
      function getThirtyDaysAgo() {
         return getPastDate(30);
      }

      // Get 30 Days from now
      function getThirtyDaysFromNow() {
         return getFutureDate(30);
      }

      // Get 90 Days ago
      function getNinetyDaysAgo() {
         return getPastDate(90);
      }

      // Get 90 days from now
      function getNinetyDaysFromNow() {
         return getFutureDate(90);
      }

      // get the date for 1 year ago
      function getOneYearAgo() {
         var ret = getPastDate(0, 0, 1);
         return ret;
      }

      // get the date 1 year from now
      function getOneYearFromNow() {
         var ret = getFutureDate(0, 0, 1);
         return ret;
      }

      // Get date of number of days, month and year in the past (from today)
      function getPastDate(numDays, numMonths, numYears, dateFrom, formatDate) {

         if (typeof (dateFrom) == 'undefined' || dateFrom == '') {
            dateFrom = new Date();
         }

         var ret = dateFrom;

         if (typeof (numDays) == 'undefined' || numDays == '') {
            numDays = 0;
         }
         if (typeof (numMonths) == 'undefined' || numMonths == '') {
            numMonths = 0;
         }
         if (typeof (numYears) == 'undefined' || numYears == '') {
            numYears = 0;
         }

         ret.setDate(ret.getDate() - numDays);
         ret.setMonth(ret.getMonth() - numMonths);
         ret.setYear(ret.getFullYear() - numYears);
         ret = getFormattedDate(ret, formatDate);

         return ret;
      }

      // Get date of number of days, month and year in the future from today
      function getFutureDate(numDays, numMonths, numYears, dateFrom, formatDate) {

         if (typeof (dateFrom) == 'undefined' || dateFrom == '') {
            dateFrom = new Date();
         }

         var ret = dateFrom;

         if (typeof (numDays) == 'undefined' || numDays == '') {
            numDays = 0;
         }
         if (typeof (numMonths) == 'undefined' || numMonths == '') {
            numMonths = 0;
         }
         if (typeof (numYears) == 'undefined' || numYears == '') {
            numYears = 0;
         }

         ret.setDate(ret.getDate() + numDays);
         ret.setMonth(ret.getMonth() + numMonths);
         ret.setYear(ret.getFullYear() + numYears);
         ret = getFormattedDate(ret, formatDate);

         return ret;
      }

      // Get date in mm/dd/yyyy format
      function getFormattedDate(dateFrom, formatDate) {

         var doFormat = true;

         if (formatDate == false || (typeof (formatDate) != 'undefined')) {
            doFormat = getBoolean(formatDate);
         }

         if (typeof (dateFrom) == 'undefined' || dateFrom == '') {
            dateFrom = new Date();
         }

         if (doFormat == true) {
            var dd = dateFrom.getDate();
            var mm = dateFrom.getMonth() + 1; //January is 0!
            var yyyy = dateFrom.getFullYear();

            if (dd < 10) { dd = '0' + dd }
            if (mm < 10) { mm = '0' + mm }

            ret = mm + '/' + dd + '/' + yyyy;
         }
         else {
            ret = dateFrom;
         }

         return ret;
      }
   </script>

   <script>
      // get param with default value
      function getParamWithDefault(name, defaultval) {
         var ret = getParameterByName(name);
         if (typeof (ret) == 'undefined' || ret == '' || ret == null) {
            ret = defaultval;
         }
         return ret;
      }

      // name value from query string
      function getParameterByName(name) {
         name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
         var regex = new RegExp('[\\?&]' + name + '=([^&#]*)'),
            results = regex.exec(location.search);
         return results == null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
      }

      // make input a date picker
      function makeDatePicker(name) {
         var n = '#' + name;
         if ($(n) != null) {
            $(n).datepicker();
         }
      }

      // ???
      function onDropdownSelectionChanged() {

         // Get the selected values
         var district = $('#ddlDistrict').val();
         var council = $('#ddlCouncil').val();

         // Construct the URL
         var baseUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
         var newUrl = baseUrl + '?district=' + district + '&council=' + council;

         // this does not work, because you need to refresh the page to trigger the datasource reload... (pk)
         // Update the URL without reloading the page
         window.history.pushState({ path: newUrl }, '', newUrl);
      }

      function OnKeyEvents(ctrl, event) {

         // check for "enter", "return", "next", "go" button.
         if (event.keyCode == 9) {
            //you got tab i.e "NEXT" Btn
            //$('#input-number').blur();
            applyFilters();
         }
         if (event.keyCode == 13) {
            //you got enter i.e "GO" Btn
            //$('#input-number').blur();
            applyFilters();
         }

         //$('#lblerror').text(msg);
         //console.log(msg);
      }

      // reset search (for entire page)
      function resetSearch() {
         reloadWithQueryStringVars({
            'c': '',
            'd': '',
            'search': '',
            's': ''
         });
      }

      // reset search
      function btnResetSearch_Clicked(ctnamesuffix, paramprefix) {
         resetSearch();
      }

      // get text with suffix
      function getTextWithSuffix(text, suffix) {
         if (typeof (suffix) == 'undefined' || suffix == '') {
            suffix = '';
         }
         var ret = text + suffix;
         return ret;
      }

      // get text with prefix
      function getTextWithPrefix(text, prefix) {
         if (typeof (prefix) == 'undefined' || prefix == '') {
            prefix = '';
         }
         var ret = prefix + text;
         return ret;
      }
   </script>

   <!-- sort test -->
   <a href="javascript:void(0);" onclick="applyFilters(event, 1);return false;"><i class="fas fa-sort"></i> ID</a>
</body>
</html>